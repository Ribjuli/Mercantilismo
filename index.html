<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Chat de Mercantilismo</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }
        
        body {
            font-family: 'Segoe UI', system-ui, -apple-system, sans-serif;
            background-color: #f0f2f5;
            height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }
        
        .chat-container {
            width: 100%;
            max-width: 500px;
            height: 100%;
            max-height: 800px;
            background: white;
            border-radius: 15px;
            box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
            display: flex;
            flex-direction: column;
            overflow: hidden;
        }
        
        .header {
            background-color: #4a69bd;
            color: white;
            padding: 15px 20px;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .header img {
            width: 40px;
            height: 40px;
            border-radius: 50%;
            object-fit: cover;
        }
        
        .header-content {
            flex: 1;
        }
        
        .header h2 {
            font-size: 18px;
            margin: 0;
        }
        
        .header p {
            font-size: 12px;
            opacity: 0.8;
            margin: 2px 0 0;
        }
        
        .messages {
            flex: 1;
            padding: 15px 10px;
            overflow-y: auto;
            display: flex;
            flex-direction: column;
            gap: 15px;
            background-color: #e5ddd5;
            background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAYAAACNiR0NAAAABmJLR0QA/wD/AP+gvaeTAAAA+UlEQVQ4y+3UMUoDQRTG8Z+KB7ATtPQEXsQDsGkEtRRS2QZSWFmJhZ1XSGmTTi/gBVLZCCkk2V1mJZtZNkVefAzD7Lxv/plhGIZh/O8jVdd1BykOMMUTXjJZin3cYoHvAeQUNzK0Ie8ww0MGOMYZbvDWg9xiimtdrZvgDG/47EDe41I7qOICz3jvQN5jorCjsMPCucr/iXzEGA842YiyjDK+8NWCXGGMcxxvRHnBGO846IC8wVQRZRu8YtSCLGOMc8zbkC+40ilGG5H3uFS8XeQUC1y0ID+rcOxVRQx1ZXEFOUKZiJ+UuExUBlmG/h9CGIZh9I8fZPXzsj3XqDMAAAAASUVORK5CYII=');
        }
        
        .message {
            display: flex;
            gap: 8px;
            max-width: 85%;
            animation: fadeIn 0.3s ease-out;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .message-avatar {
            width: 32px;
            height: 32px;
            border-radius: 50%;
            object-fit: cover;
            align-self: flex-end;
        }
        
        .message-content {
            display: flex;
            flex-direction: column;
            gap: 3px;
        }
        
        .message-bubble {
            padding: 10px 15px;
            border-radius: 18px;
            word-wrap: break-word;
            line-height: 1.4;
            font-size: 14px;
        }
        
        .message-info {
            display: flex;
            align-items: center;
            gap: 5px;
        }
        
        .message-sender {
            font-weight: bold;
            font-size: 12px;
            color: #333;
        }
        
        .message-time {
            font-size: 10px;
            color: #666;
        }
        
        .teacher-message {
            align-self: flex-end;
            flex-direction: row-reverse;
        }
        
        .teacher-message .message-bubble {
            background-color: #d9fdd3;
            border-bottom-right-radius: 4px;
        }
        
        .colbert-message .message-bubble {
            background-color: #5e69e6;
            color: white;
            border-bottom-left-radius: 4px;
        }
        
        .mun-message .message-bubble {
            background-color: #e67e22;
            color: white;
            border-bottom-left-radius: 4px;
        }
        
        .cromwell-message .message-bubble {
            background-color: #8e44ad;
            color: white;
            border-bottom-left-radius: 4px;
        }
        
        .input-container {
            display: flex;
            padding: 10px;
            background-color: #f0f2f5;
            border-top: 1px solid #ddd;
        }
        
        .input-box {
            flex: 1;
            padding: 12px 15px;
            border: none;
            border-radius: 20px;
            margin-right: 8px;
            outline: none;
            font-size: 14px;
            background-color: white;
            box-shadow: 0 1px 2px rgba(0,0,0,0.05);
        }
        
        .send-button {
            width: 50px;
            height: 40px;
            border: none;
            border-radius: 50%;
            background-color: #4a69bd;
            color: white;
            cursor: pointer;
            display: flex;
            justify-content: center;
            align-items: center;
            transition: all 0.2s;
        }
        
        .send-button:hover {
            background-color: #3b5bbf;
        }
        
        .send-icon {
            width: 20px;
            height: 20px;
        }
        
        @media (max-width: 500px) {
            body {
                padding: 0;
            }
            
            .chat-container {
                border-radius: 0;
                max-height: none;
            }
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="header">
            <img src="https://i.imgur.com/EY8WtJD.png" alt="Grupo">
            <div class="header-content">
                <h2>Historia del Mercantilismo</h2>
                <p>En l铆nea - 4 participantes</p>
            </div>
        </div>

        <div class="messages" id="messages">
            <!-- Mensajes aparecer谩n aqu铆 -->
        </div>

        <div class="input-container">
            <input type="text" id="input-box" class="input-box" placeholder="Escribe un mensaje...">
            <button class="send-button" id="send-button">
                <svg class="send-icon" viewBox="0 0 24 24" fill="white">
                    <path d="M2.01 21L23 12 2.01 3 2 10l15 2-15 2z"/>
                </svg>
            </button>
        </div>
    </div>

    <script>
        const participantes = {
            colbert: {
                nombre: "Jean-Baptiste Colbert",
                inicial: "JC",
                avatar: "https://upload.wikimedia.org/wikipedia/commons/thumb/7/76/Colbert1666.jpg/1200px-Colbert1666.jpg",
                descripcion: "Ministro de Finanzas franc茅s, principal exponente del colbertismo"
            },
            mun: {
                nombre: "Thomas Mun",
                inicial: "TM",
                avatar: "https://www.eumed.net/cursecon/dic/dent/m/muller-ah.jpg",
                descripcion: "Economista ingl茅s, te贸rico del mercantilismo"
            },
            cromwell: {
                nombre: "Oliver Cromwell",
                inicial: "OC",
                avatar: "https://ezgpf7f5ty2.exactdn.com/wp-content/uploads/cromwell.jpg?strip=all&lossy=1&ssl=1",
                descripcion: "Lord Protector de Inglaterra, implement贸 pol铆ticas mercantilistas"
            },
            teacher: {
                nombre: "Profesora",
                inicial: "P",
                avatar: "https://i.imgur.com/qMYRTqE.png",
                descripcion: "Moderando la discusi贸n"
            }
        };

        const flujoConversacion = [
            {
                pregunta: "Bienvenidos a todos. Podr铆amos comenzar explicando 驴qu茅 es el mercantilismo?",
                respuestas: [
                    {
                        sender: "mun",
                        text: "El mercantilismo fue un sistema econ贸mico dominante en Europa entre los siglos XVI y XVIII. Su premisa b谩sica era que la riqueza de una naci贸n se med铆a por la cantidad de metales preciosos que pose铆a, especialmente oro y plata. Los pa铆ses buscaban acumular estos metales mediante el comercio exterior, favoreciendo exportaciones e impidiendo importaciones. Esta l贸gica llevaba a una pol铆tica econ贸mica muy activa por parte de los estados."
                    },
                    {
                        sender: "colbert",
                        text: "Desde mi rol como Ministro de Finanzas en Francia, promov铆 un sistema mercantilista riguroso que conocemos como colbertismo. Este sistema implicaba proteger las industrias nacionales, desarrollar manufacturas estatales de lujo, y mejorar las infraestructuras para facilitar el comercio interno y externo. Todo con el fin de lograr una balanza comercial favorable y enriquecer al Estado."
                    }
                ]
            },
            {
                pregunta: "驴Cu谩les son las caracter铆sticas principales del mercantilismo?",
                respuestas: [
                    {
                        sender: "cromwell",
                        text: "Una de las principales caracter铆sticas era el proteccionismo econ贸mico, mediante aranceles elevados para desalentar importaciones. Adem谩s, el colonialismo fue esencial: las colonias deb铆an proveer materias primas y consumir productos de la metr贸poli. Tambi茅n hab铆a una fuerte intervenci贸n estatal en la econom铆a, lo que en Inglaterra se manifest贸 en los Navigation Acts, leyes dise帽adas para asegurar que el comercio beneficiara directamente a la naci贸n inglesa y a sus barcos."
                    },
                    {
                        sender: "mun",
                        text: "Tambi茅n se debe considerar que el mercantilismo part铆a de una visi贸n del comercio internacional como un juego de suma cero, donde la ganancia de una naci贸n implicaba la p茅rdida de otra. La acumulaci贸n de oro era vista como sin贸nimo de prosperidad, ignorando la importancia de la productividad, la innovaci贸n o el bienestar general de la poblaci贸n."
                    }
                ]
            },
            {
                pregunta: "驴Hab铆a diferencias entre los pa铆ses mercantilistas?",
                respuestas: [
                    {
                        sender: "colbert",
                        text: "En efecto. En Francia, mi enfoque se centr贸 en fortalecer la industria nacional mediante manufacturas reales, como la f谩brica de tapices Gobelinos o la de vidrios Saint-Gobain. Foment茅 la producci贸n de bienes de lujo que pudieran ser exportados y mejor茅 las rutas internas con canales y caminos, favoreciendo as铆 la integraci贸n econ贸mica del pa铆s."
                    },
                    {
                        sender: "cromwell",
                        text: "En Inglaterra, por el contrario, el 茅nfasis estaba en el dominio naval y el comercio internacional. Con los Navigation Acts restringimos el comercio extranjero en nuestros puertos, debilitando el comercio holand茅s. A su vez, se promovi贸 la expansi贸n colonial y la industria lanera, con un fuerte impulso a la construcci贸n de barcos y puertos."
                    }
                ]
            },
            {
                pregunta: "驴C贸mo afect贸 el mercantilismo a las colonias?",
                respuestas: [
                    {
                        sender: "cromwell",
                        text: "Las colonias fueron vistas como extensiones econ贸micas de la metr贸poli. Por ejemplo, las colonias brit谩nicas en Am茅rica del Norte no pod铆an comerciar libremente con otros pa铆ses. Deb铆an exportar productos como az煤car, algod贸n y tabaco exclusivamente a Inglaterra, y a su vez importar bienes manufacturados brit谩nicos, incluso si estos eran m谩s caros o de peor calidad que los de otras regiones."
                    },
                    {
                        sender: "colbert",
                        text: "En el caso de las colonias francesas, como Quebec, se aplicaron restricciones similares. No pod铆an desarrollar industrias propias que compitieran con las francesas. Su rol era extraer materias primas, como pieles, que luego eran transformadas en bienes de lujo en Francia. Esta relaci贸n desequilibrada gener贸 tensiones y resentimientos en las colonias."
                    }
                ]
            },
            {
                pregunta: "驴Por qu茅 declin贸 el mercantilismo?",
                respuestas: [
                    {
                        sender: "mun",
                        text: "La cr铆tica m谩s contundente vino con Adam Smith, quien en 1776 public贸 'La riqueza de las naciones'. Smith argument贸 que la riqueza no era el oro acumulado sino la capacidad productiva de un pa铆s. Critic贸 duramente el proteccionismo, mostrando c贸mo este perjudicaba a los consumidores y distorsionaba el comercio. Propuso en su lugar el libre comercio y la competencia como motores de crecimiento econ贸mico."
                    },
                    {
                        sender: "colbert",
                        text: "Adem谩s, la llegada de la Revoluci贸n Industrial transform贸 las din谩micas econ贸micas. Las f谩bricas necesitaban materias primas abundantes y mercados amplios. El control estatal r铆gido dej贸 de ser viable en un mundo que se volv铆a m谩s din谩mico y globalizado. El liberalismo econ贸mico fue reemplazando progresivamente las viejas ideas mercantilistas."
                    }
                ]
            },
            {
                pregunta: "驴Qu茅 legado dej贸 el mercantilismo?",
                respuestas: [
                    {
                        sender: "cromwell",
                        text: "Aunque como doctrina ya no se aplica, el mercantilismo dej贸 instituciones perdurables, como los bancos nacionales, sistemas aduaneros, y una visi贸n del Estado como gestor de la econom铆a nacional. En tiempos de crisis, muchas de sus ideas resurgen, como el proteccionismo y el nacionalismo econ贸mico."
                    },
                    {
                        sender: "mun",
                        text: "Hoy en d铆a observamos pr谩cticas que evocan el mercantilismo: guerras comerciales, subsidios estatales, y obsesi贸n con mantener super谩vits comerciales. Gobiernos como el de China o Estados Unidos han implementado pol铆ticas que priorizan el inter茅s nacional sobre el libre comercio, reflejando una relectura moderna del viejo pensamiento mercantilista."
                    }
                ]
            }
        ];

        let pasoActual = 0;
        let mostrandoRespuestas = false;
        let placeholderEliminado = false;

        const contenedorMensajes = document.getElementById('messages');
        const inputBox = document.getElementById('input-box');
        const botonEnviar = document.getElementById('send-button');

        function mostrarMensaje(sender, text) {
            const mensajeDiv = document.createElement('div');
            mensajeDiv.classList.add('message', ${sender}-message);

            const avatarImg = document.createElement('img');
            avatarImg.src = participantes[sender].avatar;
            avatarImg.alt = participantes[sender].nombre;
            avatarImg.classList.add('message-avatar');

            const contenidoDiv = document.createElement('div');
            contenidoDiv.classList.add('message-content');

            const infoDiv = document.createElement('div');
            infoDiv.classList.add('message-info');

            const senderSpan = document.createElement('span');
            senderSpan.classList.add('message-sender');
            senderSpan.textContent = participantes[sender].nombre;

            const timeSpan = document.createElement('span');
            timeSpan.classList.add('message-time');
            const ahora = new Date();
            timeSpan.textContent = ${ahora.getHours()}:${String(ahora.getMinutes()).padStart(2, '0')};

            const bubbleDiv = document.createElement('div');
            bubbleDiv.classList.add('message-bubble');
            bubbleDiv.textContent = text;

            infoDiv.appendChild(senderSpan);
            infoDiv.appendChild(timeSpan);
            contenidoDiv.appendChild(infoDiv);
            contenidoDiv.appendChild(bubbleDiv);

            mensajeDiv.appendChild(avatarImg);
            mensajeDiv.appendChild(contenidoDiv);

            contenedorMensajes.appendChild(mensajeDiv);
            contenedorMensajes.scrollTop = contenedorMensajes.scrollHeight;
        }

        function iniciarConversacion() {
            mostrarMensaje('teacher', flujoConversacion[pasoActual].pregunta);
            inputBox.value = flujoConversacion[pasoActual].pregunta;
            inputBox.focus();
        }

        function mostrarRespuestas() {
            mostrandoRespuestas = true;
            const respuestas = flujoConversacion[pasoActual].respuestas;

            respuestas.forEach((respuesta, index) => {
                setTimeout(() => {
                    mostrarMensaje(respuesta.sender, respuesta.text);

                    if (index === respuestas.length - 1) {
                        setTimeout(() => {
                            pasoActual++;
                            if (pasoActual < flujoConversacion.length) {
                                inputBox.value = flujoConversacion[pasoActual].pregunta;
                            } else {
                                inputBox.value = '';
                                inputBox.disabled = true;
                                botonEnviar.disabled = true;
                                inputBox.placeholder = "Fin de la conversaci贸n";
                            }
                            mostrandoRespuestas = false;
                        }, 1500);
                    }
                }, 1500 * (index + 1));
            });
        }

// ... Dentro del script, reemplaza la funci贸n manejarEnvio con esta versi贸n:
function manejarEnvio() {
    const mensaje = inputBox.value.trim();
    if (!mostrandoRespuestas && mensaje !== '') {
        mostrarMensaje('teacher', mensaje);

        //  Limpiar input y quitar placeholder una sola vez
        inputBox.value = '';
        if (!placeholderEliminado) {
            inputBox.placeholder = '';
            placeholderEliminado = true;
        }

        //  Mostrar respuestas o activar modo libre
        setTimeout(() => {
            if (pasoActual < flujoConversacion.length) {
                mostrarRespuestas();
            } else {
                inputBox.placeholder = "Escribe a uno de los personajes: @mun, @colbert, @cromwell...";
                inputBox.disabled = false;
                botonEnviar.disabled = false;
            }
        }, 1000);
    }
}


        botonEnviar.addEventListener('click', manejarEnvio);

        inputBox.addEventListener('keypress', (e) => {
            if (e.key === 'Enter') {
                manejarEnvio();
            }
        });

        iniciarConversacion();
    </script>
</body>
</html>
